function setContent(e){var s=conditionsAndInfo.icon,a='<img src="'+iconPath+icons[s]+'" class="icon">',n=forecast.day1.icon,t='<img src="'+iconPath+icons[n]+'" class="icon">',i=forecast.day2.icon,o='<img src="'+iconPath+icons[i]+'" class="icon">',r=forecast.day3.icon,c='<img src="'+iconPath+icons[r]+'" class="icon">';"imperial"===e?(main.innerHTML=conditionsAndInfo.location+a+conditionsAndInfo.description+conditionsAndInfo.imperial.temp,info.innerHTML=conditionsAndInfo.imperial.tempFeel+conditionsAndInfo.relHumidity+conditionsAndInfo.imperial.wind+conditionsAndInfo.imperial.pressure+conditionsAndInfo.imperial.visibility,forecastDay1.innerHTML=forecast.day1.day+t+forecast.day1.imperial.temp,forecastDay2.innerHTML=forecast.day2.day+o+forecast.day2.imperial.temp,forecastDay3.innerHTML=forecast.day3.day+c+forecast.day3.imperial.temp):(main.innerHTML=conditionsAndInfo.location+a+conditionsAndInfo.description+conditionsAndInfo.metric.temp,info.innerHTML=conditionsAndInfo.metric.tempFeel+conditionsAndInfo.relHumidity+conditionsAndInfo.metric.wind+conditionsAndInfo.metric.pressure+conditionsAndInfo.metric.visibility,forecastDay1.innerHTML=forecast.day1.day+t+forecast.day1.metric.temp,forecastDay2.innerHTML=forecast.day2.day+o+forecast.day2.metric.temp,forecastDay3.innerHTML=forecast.day3.day+c+forecast.day3.metric.temp),page.classList.add("active"),info.classList.add("active"),forecastContainer.classList.add("active"),settings.classList.add("active"),loader.classList.add("loaded")}function changeUnits(e){units=e.target.value,setContent(units)}function apiConnect(e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var e=JSON.parse(s.responseText);conditionsAndInfo.icon=e.current_observation.icon,conditionsAndInfo.imperial.temp='<span class="temp">'+Math.round(e.current_observation.temp_f)+"<sup>&deg;F</sup></span>",conditionsAndInfo.metric.temp='<span class="temp">'+Math.round(e.current_observation.temp_c)+"<sup>&deg;C</sup></span>",conditionsAndInfo.imperial.tempFeel='<div class="temp-feel">Feels Like: <span>'+Math.round(e.current_observation.feelslike_f)+"<sup>&deg;F</sup></div>",conditionsAndInfo.metric.tempFeel='<div class="temp-feel">Feels Like: <span>'+Math.round(e.current_observation.feelslike_c)+"<sup>&deg;C</sup></div>",conditionsAndInfo.imperial.wind='<div class="wind-sp">Wind: <span>'+e.current_observation.wind_dir+" "+Math.round(e.current_observation.wind_mph)+" mph</span></div>",conditionsAndInfo.metric.wind='<div class="wind-sp">Wind: <span>'+e.current_observation.wind_dir+" "+Math.round(e.current_observation.wind_kph)+" kph</span></div>",conditionsAndInfo.imperial.pressure='<div class="pressure">Pressure: <span>'+e.current_observation.pressure_in+" in</span></div>",conditionsAndInfo.metric.pressure='<div class="pressure">Pressure: <span>'+e.current_observation.pressure_mb+" mb</span></div>",conditionsAndInfo.imperial.visibility='<div class="visibility">Visibility: <span>'+e.current_observation.visibility_mi+" mi</span></div>",conditionsAndInfo.metric.visibility='<div class="visibility">Visibility: <span>'+e.current_observation.visibility_km+" km</span></div>",conditionsAndInfo.location='<span class="location">'+e.current_observation.display_location.full+"</span>",conditionsAndInfo.description='<span class="desc">'+e.current_observation.weather+"</span>",conditionsAndInfo.relHumidity='<div class="humidity">Relative Humidity: <span>'+e.current_observation.relative_humidity+"</span></div>",forecast.day1.imperial.temp='<span class="temp">'+Math.round(e.forecast.simpleforecast.forecastday[1].high.fahrenheit)+"<sup>&deg;F</sup></span>",forecast.day1.metric.temp='<span class="temp">'+Math.round(e.forecast.simpleforecast.forecastday[1].high.celsius)+"<sup>&deg;C</sup></span>",forecast.day1.day='<span class="day">'+e.forecast.simpleforecast.forecastday[1].date.weekday_short+"</span>",forecast.day1.icon=e.forecast.simpleforecast.forecastday[1].icon,forecast.day2.imperial.temp='<span class="temp">'+Math.round(e.forecast.simpleforecast.forecastday[2].high.fahrenheit)+"<sup>&deg;F</sup></span>",forecast.day2.metric.temp='<span class="temp">'+Math.round(e.forecast.simpleforecast.forecastday[2].high.celsius)+"<sup>&deg;C</sup></span>",forecast.day2.day='<span class="day">'+e.forecast.simpleforecast.forecastday[2].date.weekday_short+"</span>",forecast.day2.icon=e.forecast.simpleforecast.forecastday[2].icon,forecast.day3.imperial.temp='<span class="temp">'+Math.round(e.forecast.simpleforecast.forecastday[3].high.fahrenheit)+"<sup>&deg;F</sup></span>",forecast.day3.metric.temp='<span class="temp">'+Math.round(e.forecast.simpleforecast.forecastday[3].high.celsius)+"<sup>&deg;C</sup></span>",forecast.day3.day='<span class="day">'+e.forecast.simpleforecast.forecastday[3].date.weekday_short+"</span>",forecast.day3.icon=e.forecast.simpleforecast.forecastday[3].icon,setContent(units)}else main.innerHTML='<span class="error">We\'re sorry, but there was a problem.</span>',page.classList.add("active"),loader.classList.add("loaded")},s.open("GET",e,!0),s.send()}for(var errorMsg,lat,lng,units,apiKey="YOUR-API-KEY",loader=document.getElementById("loader"),page=document.getElementById("page"),main=document.getElementById("main"),info=document.getElementById("addtl-info"),forecastContainer=document.getElementById("forecast"),forecastDay1=document.getElementById("day1"),forecastDay2=document.getElementById("day2"),forecastDay3=document.getElementById("day3"),settings=document.getElementById("settings"),radioBtns=document.querySelectorAll('input[type="radio"]'),iconPath="https://res.cloudinary.com/dh1jutnwk/image/upload/",icons={chanceflurries:"v1495651313/fcc-weather-app/light-snow.svg",chancerain:"v1495651320/fcc-weather-app/rain-lt.svg",chancesleet:"v1495651321/fcc-weather-app/sleet.svg",chancesnow:"v1495651313/fcc-weather-app/light-snow.svg",chancetstorms:"v1495651324/fcc-weather-app/thunderstorm.svg",clear:"v1495651323/fcc-weather-app/sunny.svg",cloudy:"v1495651310/fcc-weather-app/cloudy.svg",flurries:"v1495651313/fcc-weather-app/light-snow.svg",fog:"v1495651310/fcc-weather-app/fog.svg",hazy:"v1495651310/fcc-weather-app/fog.svg",mostlycloudy:"v1495651315/fcc-weather-app/mostly-cloudy.svg",mostlysunny:"v1495651315/fcc-weather-app/mostly-sunny.svg",partlycloudy:"v1495651315/fcc-weather-app/mostly-sunny.svg",partlysunny:"v1495651315/fcc-weather-app/mostly-cloudy.svg",sleet:"v1495651321/fcc-weather-app/sleet.svg",rain:"v1495651318/fcc-weather-app/rain-hvy.svg",snow:"v1495651313/fcc-weather-app/hvy-snow.svg",sunny:"v1495651323/fcc-weather-app/sunny.svg",tstorms:"v1495651324/fcc-weather-app/thunderstorm.svg",unknown:"v1495651325/fcc-weather-app/unknown.svg"},conditionsAndInfo={imperial:{temp:"",tempFeel:"",wind:"",pressure:"",visibility:""},metric:{temp:"",tempFeel:"",wind:"",pressure:"",visibility:""},location:"",description:"",relHumidity:"",icon:""},forecast={day1:{imperial:{temp:""},metric:{temp:""},day:"",icon:""},day2:{imperial:{temp:""},metric:{temp:""},day:"",icon:""},day3:{imperial:{temp:""},metric:{temp:""},day:"",icon:""}},j=0;j<radioBtns.length;j++)radioBtns[j].addEventListener("click",changeUnits);"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){lat=e.coords.latitude,lng=e.coords.longitude;for(var s=0;s<radioBtns.length;s++)radioBtns[s].checked&&(units=radioBtns[s].value);apiConnect("https://api.wunderground.com/api/"+apiKey+"/forecast/conditions/q/"+lat+","+lng+".json")},function(e){errorMsg='<span class="error">'+e.message+"</span>",main.innerHTML=errorMsg,page.classList.add("active"),loader.classList.add("loaded")}):(errorMsg='<span class="error">We\'re sorry, but geolocation is not available on this device.</span>',main.innerHTML=errorMsg,page.classList.add("active"),loader.classList.add("loaded"));